{"remainingRequest":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\src\\router\\index.js","mtime":1642743739856},{"path":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\babel.config.js","mtime":1642672032543},{"path":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638364636780},{"path":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1638364638610},{"path":"C:\\Users\\98751\\Desktop\\code\\projec-SPH\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1638364638144}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcOTg3NTFcXERlc2t0b3BcXGNvZGVcXHByb2plYy1TUEhcXGFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy/phY3nva7ot6/nlLHnmoTlnLDmlrkKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsgLy/kvb/nlKjmj5Lku7YKClZ1ZS51c2UoVnVlUm91dGVyKTsgLy/lvJXlhaVzdG9yZQoKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOyAvL+WFiOaKilZ1ZVJvdXRlcuWOn+Wei+WvueixoeeahHB1c2jvvIzlhYjkv53lrZjkuIDku70KCnZhciBvcmlnaW5QdXNoID0gVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoOwp2YXIgb3JpZ2luUmVwbGFjZSA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZTsgLy/ph43lhplwdXNofHJlcGxhY2UKLy/nrKzkuIDkuKrlj4LmlbDvvJrlkYror4nljp/mnaXnmoRwdXNo5pa55rOV77yM5L2g5b6A5ZOq6YeM6Lez6L2s77yI5Lyg6YCS5ZOq5Lqb5Y+C5pWw77yJCgpWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAobG9jYXRpb24sIHJlc29sdmUsIHJlamVjdCkgewogIC8vIHRoaXMg5Li6VnVlUm91dGVy57G755qE5LiA5Liq5a6e5L6LCiAgaWYgKHJlc29sdmUgJiYgcmVqZWN0KSB7CiAgICAvLyBjYWxsfHxhcHBseeWMuuWIqwogICAgLy8g55u45ZCM54K577ya6YO95Y+v5Lul6LCD55So5Ye95pWw5LiA5qyh77yM6YO95Y+v5Lul56+h5pS55Ye95pWw55qE5LiK5LiL5paH5LiA5qyhCiAgICAvLyDkuI3lkIzngrnvvJpjYWxs5LiOYXBwbHnkvKDpgJLlj4LmlbDvvJpjYWxs5Lyg6YCS5Y+C5pWw55So6YCX5Y+36ZqU5byA77yMYXBwbHnmlrnms5XkvKDpgJLmlbDnu4QKICAgIG9yaWdpblB1c2guY2FsbCh0aGlzLCBsb2NhdGlvbiwgcmVzb2x2ZSwgcmVqZWN0KTsKICB9IGVsc2UgewogICAgb3JpZ2luUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uLCBmdW5jdGlvbiAoKSB7fSwgZnVuY3Rpb24gKCkge30pOwogIH0KfTsKClZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgcmVzb2x2ZSwgcmVqZWN0KSB7CiAgaWYgKHJlc29sdmUgJiYgcmVqZWN0KSB7CiAgICBvcmlnaW5SZXBsYWNlLmNhbGwodGhpcywgbG9jYXRpb24sIHJlc29sdmUsIHJlamVjdCk7CiAgfSBlbHNlIHsKICAgIG9yaWdpblJlcGxhY2UuY2FsbCh0aGlzLCBsb2NhdGlvbiwgZnVuY3Rpb24gKCkge30sIGZ1bmN0aW9uICgpIHt9KTsKICB9Cn07IC8v6YWN572u6Lev55SxCi8v5pq06ZyyVnVlUm91dGVy55qE5a6e5L6LCgoKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIC8vIG1vZGU6ICJoaXN0b3J5IiwKICAvL+mFjee9rui3r+eUsQogIHJvdXRlczogcm91dGVzLAogIC8v5rua5Yqo6KGM5Li6CiAgc2Nyb2xsQmVoYXZpb3I6IGZ1bmN0aW9uIHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzYXZlZFBvc2l0aW9uKSB7CiAgICAvL+i/lOWbnui/meS4qnk6MOa7muWKqOadoeWcqOacgOS4iuaWuQogICAgcmV0dXJuIHsKICAgICAgeTogMAogICAgfTsKICB9Cn0pOyAvL+WFqOWxgOWuiOWNq++8jOWJjee9ruWuiOWNq++8iOWcqOi3r+eUsei3s+i9rOS5i+WJjei/m+ihjOWIpOaWre+8iQoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB0b2tlbiwgbmFtZSwgdG9QYXRoOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvL3RvIOWPr+S7peiOt+WPluWIsOS9oOaDs+i3s+eahOmCo+S4qui3r+eUseS/oeaBrwogICAgICAgICAgICAvL2Zyb20g5Y+v5Lul6I635Y+W5Yiw5L2g5LuO5ZOq5Liq6Lev55Sx6ICM5p2l55qE5L+h5oGvCiAgICAgICAgICAgIC8vbmV4dCDmlL7ooYzlh73mlbAgIG5leHQoKeaUvuihjCAgICBuZXh0KHBhdGgp5pS+6KGM5Yiw5oyH5a6a6Lev55SxICAgIG5leHQoZmFsc2UpCiAgICAgICAgICAgIG5leHQoKTsgLy/nlKjmiLfnmbvlvZXkuobvvIzmiY3kvJrmnIl0b2tlbu+8jOacqueZu+W9leS4gOWumuS4jeS8muaciXRva2VuCgogICAgICAgICAgICB0b2tlbiA9IHN0b3JlLnN0YXRlLnVzZXIudG9rZW47IC8v55So5oi35L+h5oGvCgogICAgICAgICAgICBuYW1lID0gc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5uYW1lOyAvL+eUqOaIt+W3sue7j+eZu+W9leS6hgoKICAgICAgICAgICAgaWYgKCF0b2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PSAnL2xvZ2luJyB8fCB0by5wYXRoID09ICdyZWdpc3RlcicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoJy9ob21lJyk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIW5hbWUpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdnZXRVc2VySW5mbycpOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTIpOwogICAgICAgICAgICAvL3Rva2Vu5aSx5pWI5LqGIOiOt+WPluS4jeWIsOeUqOaIt+S/oeaBryDph43mlrDnmbvlvZUKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInVzZXJMb2dvdXQiKTsKICAgICAgICAgICAgbmV4dCgnL2xvZ2luJyk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAvL+acqueZu+W9le+8muS4jeiDveWOu+S6pOaYk+ebuOWFs++8jOS4jeiDveWOu+aUr+S7mOebuOWFs+OAkHBheXxwYXlzdWNjZXNz44CR77yM5LiN6IO95Y675Liq5Lq65Lit5b+DCiAgICAgICAgICAgIC8v5pyq55m75b2V5Y675LiK6Z2i6L+Z5Lqb6Lev55SxLS0tLS0t55m75b2VCiAgICAgICAgICAgIHRvUGF0aCA9IHRvLnBhdGg7CgogICAgICAgICAgICBpZiAodG9QYXRoLmluZGV4T2YoJy90cmFkZScpICE9IC0xIHx8IHRvUGF0aC5pbmRleE9mKCcvcGF5JykgIT0gLTEgfHwgdG9QYXRoLmluZGV4T2YoJy9jZW50ZXInKSAhPSAtMSkgewogICAgICAgICAgICAgIC8v5oqK5pyq55m75b2V55qE5pe25YCZ5oOz5Y676ICM5rKh5pyJ5Y675oiQ55qE5L+h5oGv77yM5a2Y5YKo5LqO5Zyw5Z2A5qCP5Lit44CQ6Lev55Sx44CRCiAgICAgICAgICAgICAgbmV4dCgnL2xvZ2luP3JlZGlyZWN0PScgKyBkZWNvZGVVUklDb21wb25lbnQodG9QYXRoKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy/ljrvlvpfkuI3mmK/kuIrpnaLov5nkupvot6/nlLHvvIhob21lfHNlYXJjaHxzaG9wQ2FydO+8iSAtLS0t5pS+6KGMCiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEyLCAxOF1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:/Users/98751/Desktop/code/projec-SPH/app/src/router/index.js"],"names":["Vue","routes","VueRouter","use","store","originPush","prototype","push","originReplace","replace","location","resolve","reject","call","router","scrollBehavior","to","from","savedPosition","y","beforeEach","next","token","state","user","name","userInfo","path","dispatch","toPath","indexOf","decodeURIComponent"],"mappings":"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","sourcesContent":["//配置路由的地方\r\nimport Vue from 'vue';\r\nimport routes from './routes'\r\nimport VueRouter from 'vue-router';\r\n//使用插件\r\nVue.use(VueRouter)\r\n\r\n//引入store\r\nimport store from '@/store'\r\n//先把VueRouter原型对象的push，先保存一份\r\nlet originPush = VueRouter.prototype.push;\r\nlet originReplace = VueRouter.prototype.replace;\r\n\r\n//重写push|replace\r\n//第一个参数：告诉原来的push方法，你往哪里跳转（传递哪些参数）\r\nVueRouter.prototype.push = function (location, resolve, reject) {\r\n    // this 为VueRouter类的一个实例\r\n    if (resolve && reject) {\r\n        // call||apply区别\r\n        // 相同点：都可以调用函数一次，都可以篡改函数的上下文一次\r\n        // 不同点：call与apply传递参数：call传递参数用逗号隔开，apply方法传递数组\r\n        originPush.call(this, location, resolve, reject)\r\n    } else {\r\n        originPush.call(this, location, () => {}, () => {})\r\n    }\r\n}\r\nVueRouter.prototype.replace = function (location, resolve, reject) {\r\n    if (resolve && reject) {\r\n        originReplace.call(this, location, resolve, reject)\r\n    } else {\r\n        originReplace.call(this, location, () => {}, () => {})\r\n    }\r\n}\r\n//配置路由\r\n//暴露VueRouter的实例\r\nlet router = new VueRouter({\r\n    // mode: \"history\",\r\n    //配置路由\r\n    routes,\r\n    //滚动行为\r\n    scrollBehavior(to, from, savedPosition) {\r\n        //返回这个y:0滚动条在最上方\r\n        return {\r\n            y: 0\r\n        }\r\n    }\r\n})\r\n//全局守卫，前置守卫（在路由跳转之前进行判断）\r\nrouter.beforeEach(async (to, from, next) => {\r\n    //to 可以获取到你想跳的那个路由信息\r\n    //from 可以获取到你从哪个路由而来的信息\r\n    //next 放行函数  next()放行    next(path)放行到指定路由    next(false)\r\n    next();\r\n    //用户登录了，才会有token，未登录一定不会有token\r\n    let token = store.state.user.token\r\n    //用户信息\r\n    let name = store.state.user.userInfo.name;\r\n    //用户已经登录了\r\n    if (token) {\r\n        //用户已经登录了还想去login----不行\r\n        if (to.path == '/login' || to.path == 'register') {\r\n            next('/home')\r\n        } else {\r\n            //登录了，但是去的不是login\r\n            //如果用户名已有\r\n            if (name) {\r\n                next()\r\n            } else {\r\n                //没有用户信息,派发action让仓库存储用户信息再跳转\r\n                try {\r\n                    //获取用户信息成功\r\n                    await store.dispatch('getUserInfo')\r\n                    next();\r\n                } catch (error) {\r\n                    //token失效了 获取不到用户信息 重新登录\r\n                    store.dispatch(\"userLogout\")\r\n                    next('/login')\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        //未登录：不能去交易相关，不能去支付相关【pay|paysuccess】，不能去个人中心\r\n        //未登录去上面这些路由------登录\r\n        let toPath = to.path;\r\n        if (toPath.indexOf('/trade') != -1 || toPath.indexOf('/pay') != -1 || toPath.indexOf('/center') != -1) {\r\n            //把未登录的时候想去而没有去成的信息，存储于地址栏中【路由】\r\n            next('/login?redirect=' + decodeURIComponent(toPath))\r\n        } else {\r\n            //去得不是上面这些路由（home|search|shopCart） ----放行\r\n            next()\r\n        }\r\n\r\n    }\r\n})\r\nexport default router"]}]}