{"remainingRequest":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Attr\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Attr\\index.vue","mtime":1644657348238},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1643016934935},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js","mtime":1643016935387}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL+aMiemcgOW8leWFpWxvZGFzaOW9k+S4reeahOa3seaLt+i0nQ0KaW1wb3J0IGNsb25lRGVlcCBmcm9tICJsb2Rhc2gvY2xvbmVEZWVwIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkF0dHIiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjYXRlZ29yeTFJZDogIiIsDQogICAgICBjYXRlZ29yeTJJZDogIiIsDQogICAgICBjYXRlZ29yeTNJZDogIiIsDQogICAgICAvL+aOpeWPl+W5s+WPsOWxnuaAp+eahOWtl+autQ0KICAgICAgYXR0ckxpc3Q6IFtdLA0KICAgICAgLy/ov5nkuKrlsZ7mgKfmjqfliLZ0YWJsZeeahOaYvuekuuS4jumakOiXjw0KICAgICAgaXNTaG93VGFibGU6IHRydWUsDQogICAgICAvL+aUtumbhuaWsOWinuWxnuaAp3zkv67mlLnlsZ7mgKfkvb/nlKjnmoQNCiAgICAgIGF0dHJJbmZvOiB7DQogICAgICAgIGF0dHJOYW1lOiAiIiwgLy/lsZ7mgKflkI0NCiAgICAgICAgYXR0clZhbHVlTGlzdDogWw0KICAgICAgICAgIC8v5bGe5oCn5YC8DQogICAgICAgIF0sDQogICAgICAgIGNhdGVnb3J5SWQ6IDAsIC8v5LiJ57qn5YiG57G755qEaWQNCiAgICAgICAgY2F0ZWdvcnlMZXZlbDogMCwgLy/lm6DkuLrmnI3liqHlmajkuZ/pnIDopoHljLrliIbmmK/lh6DnuqdpZA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy/oh6rlrprkuYnkuovku7bnmoTlm57osIMNCiAgICBnZXRDYXRlZ29yeUlkKHsgY2F0ZWdvcnlJZCwgbGV2ZWwgfSkgew0KICAgICAgLy/ljLrliIbkuInnuqfliIbnsbvnm7jlupTnmoRJROS7peWPiueItue7hOS7tui/m+ihjOWtmOWCqA0KICAgICAgaWYgKGxldmVsID09IDEpIHsNCiAgICAgICAgdGhpcy5jYXRlZ29yeTFJZCA9IGNhdGVnb3J5SWQ7DQogICAgICAgIHRoaXMuY2F0ZWdvcnkySWQgPSAiIjsNCiAgICAgICAgdGhpcy5jYXRlZ29yeTNJZCA9ICIiOw0KICAgICAgfSBlbHNlIGlmIChsZXZlbCA9PSAyKSB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnkySWQgPSBjYXRlZ29yeUlkOw0KICAgICAgICB0aGlzLmNhdGVnb3J5M0lkID0gIiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvL+S7o+ihqOS4iee6p+WIhuexu+eahElE5pyJ5LqGDQogICAgICAgIHRoaXMuY2F0ZWdvcnkzSWQgPSBjYXRlZ29yeUlkOw0KICAgICAgICB0aGlzLmdldEF0dHJMaXN0KCk7DQogICAgICB9DQogICAgfSwNCiAgICAvL+iOt+WPluW5s+WPsOWxnuaAp+eahOaVsOaNrg0KICAgIGFzeW5jIGdldEF0dHJMaXN0KCkgew0KICAgICAgY29uc3QgeyBjYXRlZ29yeTFJZCwgY2F0ZWdvcnkySWQsIGNhdGVnb3J5M0lkIH0gPSB0aGlzOw0KICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJEFQSS5hdHRyLnJlcUF0dHJMaXN0KA0KICAgICAgICBjYXRlZ29yeTFJZCwNCiAgICAgICAgY2F0ZWdvcnkySWQsDQogICAgICAgIGNhdGVnb3J5M0lkDQogICAgICApOw0KICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICB0aGlzLmF0dHJMaXN0ID0gcmVzLmRhdGE7DQogICAgICB9DQogICAgfSwNCiAgICAvL+a3u+WKoOWxnuaAp+WAvOeahOWbnuiwgw0KICAgIGFkZEF0dHJWYWx1ZSgpIHsNCiAgICAgIC8v5ZCR5bGe5oCn5YC855qE5pWw57uE6YeM6Z2i5re75Yqg5YWD57SgDQogICAgICB0aGlzLmF0dHJJbmZvLmF0dHJWYWx1ZUxpc3QucHVzaCh7DQogICAgICAgIGF0dHJJZDogdGhpcy5hdHRySW5mby5pZCwNCiAgICAgICAgdmFsdWVOYW1lOiAiIiwNCiAgICAgICAgZmxhZzogdHJ1ZSwNCiAgICAgIH0pOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzW3RoaXMuYXR0ckluZm8uYXR0clZhbHVlTGlzdC5sZW5ndGggLSAxXS5mb2N1cygpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+a3u+WKoOWxnuaAp+aMiemSrueahOWbnuiwgw0KICAgIGFkZEF0dHIoKSB7DQogICAgICB0aGlzLmlzU2hvd1RhYmxlID0gZmFsc2U7DQogICAgICAvL+a4hemZpOaVsOaNrg0KICAgICAgdGhpcy5hdHRySW5mbyA9IHsNCiAgICAgICAgYXR0ck5hbWU6ICIiLCAvL+WxnuaAp+WQjQ0KICAgICAgICBhdHRyVmFsdWVMaXN0OiBbDQogICAgICAgICAgLy/lsZ7mgKflgLwNCiAgICAgICAgXSwNCiAgICAgICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeTNJZCwgLy/kuInnuqfliIbnsbvnmoRpZA0KICAgICAgICBjYXRlZ29yeUxldmVsOiAzLCAvL+WboOS4uuacjeWKoeWZqOS5n+mcgOimgeWMuuWIhuaYr+WHoOe6p2lkDQogICAgICB9Ow0KICAgIH0sDQogICAgLy/kv67mlLnmn5DkuIDkuKrlsZ7mgKcNCiAgICB1cGRhdGVBdHRyKHJvdykgew0KICAgICAgdGhpcy5pc1Nob3dUYWJsZSA9IGZhbHNlOw0KICAgICAgLy/lsIbpgInkuK3nmoTlsZ7mgKfotYvlgLznu5lhdHRySW5mbw0KICAgICAgdGhpcy5hdHRySW5mbyA9IGNsb25lRGVlcChyb3cpOw0KICAgICAgLy/nlLHkuo7mlbDmja7nu5PmnoTlvZPkuK3lrZjlnKjlr7nosaHph4zpnaLlpZfmlbDnu4TvvIzmlbDnu4Tph4zpnaLlpZflr7nosaHvvIzlm6DmraTpnIDopoHkvb/nlKjmt7Hmi7fotJ3op6PlhrMNCiAgICAgIC8v5Zyo5L+u5pS55p+Q5LiA5Liq5bGe5oCn55qE5pe25YCZ77yM57uZ5YWD57Sg5Yqg5LiKZmxhZ+i/meS4quagh+iusA0KICAgICAgdGhpcy5hdHRySW5mby5hdHRyVmFsdWVMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICJmbGFnIiwgZmFsc2UpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+WkseWOu+eEpueCueeahOS6i+S7tg0KICAgIHRvTG9vayhyb3cpIHsNCiAgICAgIGlmIChyb3cudmFsdWVOYW1lLnRyaW0oKSA9PSAiIikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKCLor7fovpPlhaXmraPluLjnmoTlsZ7mgKflgLwiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgLy/mlrDlop7nmoTlsZ7mgKflgLzkuI3og73kuI7lt7LmnInnmoTlsZ7mgKflgLzph43lpI0NCiAgICAgIGxldCBpc1JlYXB0ID0gdGhpcy5hdHRySW5mby5hdHRyVmFsdWVMaXN0LnNvbWUoKGl0ZW0pID0+IHsNCiAgICAgICAgLy/pnIDopoHlsIZyb3fku47mlbDnu4Tph4zpnaLliKTmlq3nmoTml7blgJnljrvpmaQNCiAgICAgICAgLy9yb3fmnIDmlrDmlrDlop7nmoTlsZ7mgKflgLwNCiAgICAgICAgaWYgKHJvdyAhPT0gaXRlbSkgew0KICAgICAgICAgIHJldHVybiByb3cudmFsdWVOYW1lID09IGl0ZW0udmFsdWVOYW1lOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIGlmIChpc1JlYXB0KSByZXR1cm47DQogICAgICByb3cuZmxhZyA9IGZhbHNlOw0KICAgIH0sDQogICAgLy/ngrnlh7tzcGFu55qE5Zue6LCDDQogICAgdG9FZGl0KHJvdywgaW5kZXgpIHsNCiAgICAgIHJvdy5mbGFnID0gdHJ1ZTsNCiAgICAgIC8v6I635Y+WaW5wdXToioLngrnvvIzlrp7njrDoh6rliqjogZrnhKYNCiAgICAgIC8v6ZyA6KaB5rOo5oSP77ya54K55Ye7c3BhbueahOaXtuWAme+8jOWIh+aNouS4umlucHV05Y+Y5Li657yW6L6R5qih5byP77yM5L2G5piv6ZyA6KaB5rOo5oSP77yM5a+55LqO5rWP6KeI5Zmo6ICM6KiA77yM6aG16Z2i6YeN57uY6YeN5o6S6ICX6LS55pe26Ze077yM5Zug5q2k5oiR5Lus5LiN5Y+v6IO95LiA54K55Ye7c3Bhbueri+mprOiOt+WPluWIsGlucHV0DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnNbaW5kZXhdLmZvY3VzKCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5rCU5rOh56Gu6K6k5qGG55qE56Gu5a6a5oyJ6ZKu55qE5Zue6LCDDQogICAgZGVsZXRlQXR0clZhbHVlKGluZGV4KSB7DQogICAgICAvL+W9k+WJjeWIoOmZpOWxnuaAp+WAvOeahOaTjeS9nOaYr+S4jemcgOimgeWPkeivt+axgueahA0KICAgICAgdGhpcy5hdHRySW5mby5hdHRyVmFsdWVMaXN0LnNwbGljZShpbmRleCwgMSk7DQogICAgfSwNCg0KICAgIC8v5L+d5a2Y5oyJ6ZKu77ya6L+b6KGM5re75Yqg5bGe5oCn5oiW6ICF5L+u5pS55bGe5oCn55qE5pON5L2cDQogICAgYXN5bmMgYWRkT3JVcGRhdGVBdHRyKCkgew0KICAgICAgLy/mlbTnkIblj4LmlbDvvJox5aaC5p6c55So5oi35re75Yqg5b6I5aSa5bGe5oCn5YC877yM5LiU5bGe5oCn5YC85Li656m655qE5LiN5bqU6K+l5o+Q5Lqk57uZ5pyN5Yqh5ZmoDQogICAgICAvL+aPkOS6pOe7meacjeWKoeWZqOeahOaVsOaNruS4jeW6lOivpeWHuueOsGZsYWflrZfmrrUNCiAgICAgIHRoaXMuYXR0ckluZm8uYXR0clZhbHVlTGlzdCA9IHRoaXMuYXR0ckluZm8uYXR0clZhbHVlTGlzdC5maWx0ZXIoDQogICAgICAgIChpdGVtKSA9PiB7DQogICAgICAgICAgLy/ov4fmu6TmjonlsZ7mgKflgLzkuI3kuLrnqboNCiAgICAgICAgICBpZiAoaXRlbS52YWx1ZU5hbWUgIT0gIiIpIHsNCiAgICAgICAgICAgIC8v5Yig6Zmk5o6JZmxhZ+WxnuaApw0KICAgICAgICAgICAgZGVsZXRlIGl0ZW0uZmxhZzsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgKTsNCg0KICAgICAgLy/kv53lrZjmiJDlip/ku6XlkI7pnIDopoHlho3mrKHojrflj5blubPlj7DlsZ7mgKfov5vooYzlsZXnpLoNCiAgICAgIHRyeSB7DQogICAgICAgIC8v5Y+R6K+35rGCDQogICAgICAgIGF3YWl0IHRoaXMuJEFQSS5hdHRyLnJlcUFkZE9yVXBkYXRlQXR0cih0aGlzLmF0dHJJbmZvKTsNCiAgICAgICAgLy/lsZXnpLrlubPlj7DlsZ7mgKfnmoTkv6Hlj7fph4/ov5vooYzliIfmjaINCiAgICAgICAgdGhpcy5pc1Nob3dUYWJsZSA9IHRydWU7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLkv53lrZjmiJDlip8iIH0pOw0KICAgICAgICB0aGlzLmdldEF0dHJMaXN0KCk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKCLkv53lrZjlpLHotKUiKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/Attr","sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"margin: 20px 0px\">\r\n      <CategorySelect @getCategoryId=\"getCategoryId\" :show=\"!isShowTable\" />\r\n    </el-card>\r\n    <el-card>\r\n      <div v-show=\"isShowTable\">\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          :disabled=\"!category3Id\"\r\n          @click=\"addAttr\"\r\n          >添加属性</el-button\r\n        >\r\n        <!-- 表格：展示平台属性 -->\r\n        <el-table style=\"width: 100%\" border :data=\"attrList\">\r\n          <el-table-column\r\n            type=\"index\"\r\n            label=\"序号\"\r\n            width=\"80\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"attrName\"\r\n            label=\"属性名称\"\r\n            width=\"150\"\r\n          ></el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"属性值列表\" width=\"width\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-tag\r\n                type=\"success\"\r\n                v-for=\"(attrVal, index) in row.attrValueList\"\r\n                :key=\"attrVal.id\"\r\n                style=\"margin: 0px 20px\"\r\n                >{{ attrVal.valueName }}</el-tag\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"150\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-edit\"\r\n                size=\"mini\"\r\n                @click=\"updateAttr(row)\"\r\n              ></el-button>\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <!-- 添加属性|修改属性的结构 -->\r\n      <div v-show=\"!isShowTable\">\r\n        <el-form :line=\"true\" ref=\"form\" label-width=\"80px\" :model=\"attrInfo\">\r\n          <el-form-item label=\"属性名\">\r\n            <el-input\r\n              placeholder=\"请输入属性名\"\r\n              v-model=\"attrInfo.attrName\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          @click=\"addAttrValue\"\r\n          :disabled=\"!attrInfo.attrName\"\r\n          >添加属性值</el-button\r\n        >\r\n        <el-button>取消</el-button>\r\n        <el-table style=\"width: 100%\" border :data=\"attrInfo.attrValueList\">\r\n          <el-table-column\r\n            align=\"center\"\r\n            type=\"index\"\r\n            label=\"序号\"\r\n            width=\"80\"\r\n          ></el-table-column>\r\n          <el-table-column align=\"center\" label=\"属性值名称\" width=\"width\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-input\r\n                v-model=\"row.valueName\"\r\n                placeholder=\"请输入属性值名称\"\r\n                size=\"mini\"\r\n                v-if=\"row.flag\"\r\n                @blur=\"toLook(row)\"\r\n                @keyup.native.enter=\"toLook(row)\"\r\n                :ref=\"$index\"\r\n              ></el-input>\r\n              <span\r\n                v-else\r\n                @click=\"toEdit(row, $index)\"\r\n                style=\"display: block\"\r\n                >{{ row.valueName }}</span\r\n              ></template\r\n            ></el-table-column\r\n          >\r\n          <el-table-column align=\"center\" label=\"操作\" width=\"80\">\r\n            <!-- 气泡确认框 -->\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-popconfirm\r\n                :title=\"`确定删除${row.valueName}?`\"\r\n                @onConfirm=\"deleteAttrValue($index)\"\r\n              >\r\n                <el-button\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  size=\"mini\"\r\n                  slot=\"reference\"\r\n                ></el-button>\r\n              </el-popconfirm>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"addOrUpdateAttr\"\r\n          :disabled=\"attrInfo.attrValueList.length < 1\"\r\n          >保存</el-button\r\n        >\r\n        <el-button @click=\"isShowTable = true\">取消</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//按需引入lodash当中的深拷贝\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nexport default {\r\n  name: \"Attr\",\r\n  data() {\r\n    return {\r\n      category1Id: \"\",\r\n      category2Id: \"\",\r\n      category3Id: \"\",\r\n      //接受平台属性的字段\r\n      attrList: [],\r\n      //这个属性控制table的显示与隐藏\r\n      isShowTable: true,\r\n      //收集新增属性|修改属性使用的\r\n      attrInfo: {\r\n        attrName: \"\", //属性名\r\n        attrValueList: [\r\n          //属性值\r\n        ],\r\n        categoryId: 0, //三级分类的id\r\n        categoryLevel: 0, //因为服务器也需要区分是几级id\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    //自定义事件的回调\r\n    getCategoryId({ categoryId, level }) {\r\n      //区分三级分类相应的ID以及父组件进行存储\r\n      if (level == 1) {\r\n        this.category1Id = categoryId;\r\n        this.category2Id = \"\";\r\n        this.category3Id = \"\";\r\n      } else if (level == 2) {\r\n        this.category2Id = categoryId;\r\n        this.category3Id = \"\";\r\n      } else {\r\n        //代表三级分类的ID有了\r\n        this.category3Id = categoryId;\r\n        this.getAttrList();\r\n      }\r\n    },\r\n    //获取平台属性的数据\r\n    async getAttrList() {\r\n      const { category1Id, category2Id, category3Id } = this;\r\n      let res = await this.$API.attr.reqAttrList(\r\n        category1Id,\r\n        category2Id,\r\n        category3Id\r\n      );\r\n      if (res.code == 200) {\r\n        this.attrList = res.data;\r\n      }\r\n    },\r\n    //添加属性值的回调\r\n    addAttrValue() {\r\n      //向属性值的数组里面添加元素\r\n      this.attrInfo.attrValueList.push({\r\n        attrId: this.attrInfo.id,\r\n        valueName: \"\",\r\n        flag: true,\r\n      });\r\n      this.$nextTick(() => {\r\n        this.$refs[this.attrInfo.attrValueList.length - 1].focus();\r\n      });\r\n    },\r\n    //添加属性按钮的回调\r\n    addAttr() {\r\n      this.isShowTable = false;\r\n      //清除数据\r\n      this.attrInfo = {\r\n        attrName: \"\", //属性名\r\n        attrValueList: [\r\n          //属性值\r\n        ],\r\n        categoryId: this.category3Id, //三级分类的id\r\n        categoryLevel: 3, //因为服务器也需要区分是几级id\r\n      };\r\n    },\r\n    //修改某一个属性\r\n    updateAttr(row) {\r\n      this.isShowTable = false;\r\n      //将选中的属性赋值给attrInfo\r\n      this.attrInfo = cloneDeep(row);\r\n      //由于数据结构当中存在对象里面套数组，数组里面套对象，因此需要使用深拷贝解决\r\n      //在修改某一个属性的时候，给元素加上flag这个标记\r\n      this.attrInfo.attrValueList.forEach((item) => {\r\n        this.$set(item, \"flag\", false);\r\n      });\r\n    },\r\n    //失去焦点的事件\r\n    toLook(row) {\r\n      if (row.valueName.trim() == \"\") {\r\n        this.$message(\"请输入正常的属性值\");\r\n        return;\r\n      }\r\n      //新增的属性值不能与已有的属性值重复\r\n      let isReapt = this.attrInfo.attrValueList.some((item) => {\r\n        //需要将row从数组里面判断的时候去除\r\n        //row最新新增的属性值\r\n        if (row !== item) {\r\n          return row.valueName == item.valueName;\r\n        }\r\n      });\r\n      if (isReapt) return;\r\n      row.flag = false;\r\n    },\r\n    //点击span的回调\r\n    toEdit(row, index) {\r\n      row.flag = true;\r\n      //获取input节点，实现自动聚焦\r\n      //需要注意：点击span的时候，切换为input变为编辑模式，但是需要注意，对于浏览器而言，页面重绘重排耗费时间，因此我们不可能一点击span立马获取到input\r\n      this.$nextTick(() => {\r\n        this.$refs[index].focus();\r\n      });\r\n    },\r\n    //气泡确认框的确定按钮的回调\r\n    deleteAttrValue(index) {\r\n      //当前删除属性值的操作是不需要发请求的\r\n      this.attrInfo.attrValueList.splice(index, 1);\r\n    },\r\n\r\n    //保存按钮：进行添加属性或者修改属性的操作\r\n    async addOrUpdateAttr() {\r\n      //整理参数：1如果用户添加很多属性值，且属性值为空的不应该提交给服务器\r\n      //提交给服务器的数据不应该出现flag字段\r\n      this.attrInfo.attrValueList = this.attrInfo.attrValueList.filter(\r\n        (item) => {\r\n          //过滤掉属性值不为空\r\n          if (item.valueName != \"\") {\r\n            //删除掉flag属性\r\n            delete item.flag;\r\n            return true;\r\n          }\r\n        }\r\n      );\r\n\r\n      //保存成功以后需要再次获取平台属性进行展示\r\n      try {\r\n        //发请求\r\n        await this.$API.attr.reqAddOrUpdateAttr(this.attrInfo);\r\n        //展示平台属性的信号量进行切换\r\n        this.isShowTable = true;\r\n        this.$message({ type: \"success\", message: \"保存成功\" });\r\n        this.getAttrList();\r\n      } catch (error) {\r\n        this.$message(\"保存失败\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}