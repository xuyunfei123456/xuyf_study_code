{"remainingRequest":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Spu\\SkuForm\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Spu\\SkuForm\\index.vue","mtime":1645532812529},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1643016934935},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js","mtime":1643016935387}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v5a2Y5YKo5Zu+54mH55qE5L+h5oGvDQogICAgICBzcHVJbWFnZUxpc3Q6IFtdLA0KICAgICAgLy/lrZjlgqjplIDllK7nmoTlsZ7mgKcNCiAgICAgIHNwdVNhbGVBdHRyTGlzdDogW10sDQogICAgICAvL+WtmOWCqOW5s+WPsOWxnuaAp+eahOaVsOaNrg0KICAgICAgYXR0ckluZm9MaXN0OiBbXSwNCiAgICAgIC8v5pS26ZuGc2t15pWw5o2u55qE5a2X5q61DQogICAgICBza3VJbmZvOiB7DQogICAgICAgIC8v56ys5LiA57G75pS26ZuG55qE5pWw5o2u77yM54i257uE5Lu257uZ55qE5pWw5o2uDQogICAgICAgIGNhdGVnb3J5M0lkOiAwLA0KICAgICAgICBzcHVJZDogMCwNCiAgICAgICAgdG1JZDogMCwNCiAgICAgICAgLy/nrKzkuoznsbvvvJrpnIDopoHpgJrov4fmlbDmja7lj4zlkJHnu5Hlrpp2LW1vZGVs5pS26ZuGDQogICAgICAgIHNrdU5hbWU6ICIiLA0KICAgICAgICBwcmljZTogMCwNCiAgICAgICAgd2VpZ2h0OiAiIiwNCiAgICAgICAgc2t1RGVzYzogIiIsDQogICAgICAgIC8v56ys5LiJ57G777ya6ZyA6KaB6Ieq5bex5Lmm5YaZ5Luj56CBDQogICAgICAgIC8v6buY6K6k5Zu+54mHDQogICAgICAgIHNrdURlZmF1bHRJbWc6ICIiLA0KICAgICAgICAvL+W5s+WPsOWxnuaApw0KICAgICAgICBza3VBdHRyVmFsdWVMaXN0OiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgYXR0cklkOiAwLA0KICAgICAgICAgICAgdmFsdWVJZDogMCwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICAvL+aUtumbhuWbvueJh+eahOWtl+autQ0KICAgICAgICBza3VJbWFnZUxpc3Q6IFsNCiAgICAgICAgICAvLyB7DQogICAgICAgICAgLy8gICBpZDogMCwNCiAgICAgICAgICAvLyAgIGltZ05hbWU6ICJzdHJpbmciLA0KICAgICAgICAgIC8vICAgaW1nVXJsOiAic3RyaW5nIiwNCiAgICAgICAgICAvLyAgIGlzRGVmYXVsdDogInN0cmluZyIsDQogICAgICAgICAgLy8gICBza3VJZDogMCwNCiAgICAgICAgICAvLyAgIHNwdUltZ0lkOiAwLA0KICAgICAgICAgIC8vIH0sDQogICAgICAgIF0sDQogICAgICAgIC8v6ZSA5ZSu5bGe5oCnDQogICAgICAgIHNrdVNhbGVBdHRyVmFsdWVMaXN0OiBbDQogICAgICAgICAgLy8gew0KICAgICAgICAgIC8vICAgaWQ6IDAsDQogICAgICAgICAgLy8gICBzYWxlQXR0cklkOiAwLA0KICAgICAgICAgIC8vICAgc2FsZUF0dHJOYW1lOiAic3RyaW5nIiwNCiAgICAgICAgICAvLyAgIHNhbGVBdHRyVmFsdWVJZDogMCwNCiAgICAgICAgICAvLyAgIHNhbGVBdHRyVmFsdWVOYW1lOiAic3RyaW5nIiwNCiAgICAgICAgICAvLyAgIHNrdUlkOiAwLA0KICAgICAgICAgIC8vICAgc3B1SWQ6IDAsDQogICAgICAgICAgLy8gfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgICBzcHU6IHt9LA0KICAgICAgLy/mlLbpm4blm77niYfnmoTmlbDmja7lrZfmrrUNCiAgICAgIGltYWdlTGlzdDogW10sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v6I635Y+Wc2t1Rm9ybeaVsOaNrg0KICAgIGFzeW5jIGdldERhdGEoY2F0ZWdvcnkxSWQsIGNhdGVnb3J5MklkLCBzcHUpIHsNCiAgICAgIC8v5pS26ZuG54i257uE5Lu257uZ5LqI55qE5pWw5o2uDQogICAgICB0aGlzLnNrdUluZm8uY2F0ZWdvcnkzSWQgPSBzcHUuY2F0ZWdvcnkzSWQ7DQogICAgICB0aGlzLnNrdUluZm8uc3B1SWQgPSBzcHUuaWQ7DQogICAgICB0aGlzLnNrdUluZm8udG1JZCA9IHNwdS50bUlkOw0KICAgICAgdGhpcy5zcHUgPSBzcHU7DQogICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kQVBJLnNwdS5yZXFTcHVJbWFnZUxpc3Qoc3B1LmlkKTsNCiAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsNCiAgICAgICAgbGV0IGxpc3QgPSByZXMuZGF0YTsNCiAgICAgICAgbGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgaXRlbS5pc0RlZmF1bHQgPSAwOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5zcHVJbWFnZUxpc3QgPSBsaXN0Ow0KICAgICAgfQ0KICAgICAgbGV0IHJlczEgPSBhd2FpdCB0aGlzLiRBUEkuc3B1LnJlcVNwdVNhbGVBdHRyTGlzdChzcHUuaWQpOw0KICAgICAgaWYgKHJlczEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5zcHVTYWxlQXR0ckxpc3QgPSByZXMxLmRhdGE7DQogICAgICB9DQogICAgICBsZXQgcmVzMiA9IGF3YWl0IHRoaXMuJEFQSS5zcHUucmVxU3B1SW5mb0xpc3QoDQogICAgICAgIGNhdGVnb3J5MUlkLA0KICAgICAgICBjYXRlZ29yeTJJZCwNCiAgICAgICAgc3B1LmNhdGVnb3J5M0lkDQogICAgICApOw0KICAgICAgaWYgKHJlczIuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5hdHRySW5mb0xpc3QgPSByZXMyLmRhdGE7DQogICAgICB9DQogICAgfSwNCiAgICAvL3RhYmxl6KGo5qC85aSN6YCJ5qGG6YCJ5Lit55qE5LqL5Lu2DQogICAgaGFuZGxlU2VsZWN0Q2hhbmdlKHBhcmFtcykgew0KICAgICAgLy/ojrflj5bnlKjmiLfpgInkuK3lm77niYfnmoTkv6Hmga/vvIzkvYbmmK/nvLrlsJFpc0RlZmF1bHTlrZfmrrUNCiAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gcGFyYW1zOw0KICAgIH0sDQogICAgLy/mjpLku5bnmoTmk43kvZwNCiAgICBjaGFuZ2VEZWZhdWx0KHJvdykgew0KICAgICAgLy/lm77niYfliJfooajnmoTmlbDmja7nmoRpc0RlZmF1bHTlrZfmrrXkuLowDQogICAgICB0aGlzLnNwdUltYWdlTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGl0ZW0uaXNEZWZhdWx0ID0gMDsNCiAgICAgIH0pOw0KICAgICAgcm93LmlzRGVmYXVsdCA9IDE7DQogICAgICB0aGlzLnNrdUluZm8uc2t1RGVmYXVsdEltZyA9IHJvdy5pbWdVcmw7DQogICAgfSwNCiAgICAvL+WPlua2iA0KICAgIGNhbmNlbCgpIHsNCiAgICAgIC8v6Ieq5a6a5LmJ5LqL5Lu277yM6K6p54i257uE5Lu25YiH5o2i5Zy65pmv5Li6MA0KICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlU2NlbmVzIiwgMCk7DQogICAgICAvL+a4hemZpOaVsOaNrg0KICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9kYXRhLCB0aGlzLiRvcHRpb25zLmRhdGEoKSk7DQogICAgfSwNCiAgICAvL+S/neWtmA0KICAgIGFzeW5jIHNhdmUoKSB7DQogICAgICAvL+aVtOeQhuW5s+WPsOWxnuaApw0KICAgICAgY29uc3QgeyBhdHRySW5mb0xpc3QsIHNrdUluZm8sIHNwdVNhbGVBdHRyTGlzdCwgaW1hZ2VMaXN0IH0gPSB0aGlzOw0KICAgICAgLy/mlbTnkIblubPlj7DlsZ7mgKfmlbDmja7mlrnms5UxDQogICAgICAvLyBsZXQgYXJyPVtdOw0KICAgICAgLy8gLy/miormlLbpm4bliLDnmoTmlbDmja7lhYjmlbTnkIbkuIDkuIsNCiAgICAgIC8vIGF0dHJJbmZvTGlzdC5mb3JFYWNoKGl0ZW09PnsNCiAgICAgIC8vICAgLy/lvZPliY3lubPlj7DlsZ7mgKfnlKjmiLfov5vooYzpgInmi6kNCiAgICAgIC8vICAgaWYoaXRlbS5hdHRySWRBbmRWYWx1ZUlkKXsNCiAgICAgIC8vICAgICBjb25zdCBbYXR0cklkLHZhbHVlSWRdPWl0ZW0uYXR0cklkQW5kVmFsdWVJZC5zcGxpdCgiOiIpOw0KICAgICAgLy8gICAgIC8v5pC65bim57uZ5pyN5Yqh5Zmo5Y+C5pWw5bqU6K+l5piv5a+56LGhDQogICAgICAvLyAgICAgbGV0IG9iaj17dmFsdWVJZCxhdHRySWR9Ow0KICAgICAgLy8gICAgIGFyci5wdXNoKG9iaikNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfSkNCiAgICAgIC8v5pW055CG5bmz5Y+w5bGe5oCn5pWw5o2u5pa55rOVMg0KICAgICAgc2t1SW5mby5za3VBdHRyVmFsdWVMaXN0ID0gYXR0ckluZm9MaXN0LnJlZHVjZSgocHJldiwgaXRlbSkgPT4gew0KICAgICAgICBpZiAoaXRlbS5hdHRySWRBbmRWYWx1ZUlkKSB7DQogICAgICAgICAgY29uc3QgW2F0dHJJZCwgdmFsdWVJZF0gPSBpdGVtLmF0dHJJZEFuZFZhbHVlSWQuc3BsaXQoIjoiKTsNCiAgICAgICAgICBwcmV2LnB1c2goeyBhdHRySWQsIHZhbHVlSWQgfSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHByZXY7DQogICAgICB9LCBbXSk7DQogICAgICAvL+aVtOeQhumUgOWUruWxnuaApw0KICAgICAgc2t1SW5mby5za3VTYWxlQXR0clZhbHVlTGlzdCA9IHNwdVNhbGVBdHRyTGlzdC5yZWR1Y2UoKHByZXYsIGl0ZW0pID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uYXR0cklkQW5kVmFsdWVJZCkgew0KICAgICAgICAgIGNvbnN0IFtzYWxlQXR0cklkLCBzYWxlQXR0clZhbHVlSWRdID0gaXRlbS5hdHRySWRBbmRWYWx1ZUlkOw0KICAgICAgICAgIHByZXYucHVzaCh7IHNhbGVBdHRySWQsIHNhbGVBdHRyVmFsdWVJZCB9KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcHJldjsNCiAgICAgIH0sIFtdKTsNCiAgICAgIC8v5pW055CG5Zu+54mH55qE5pWw5o2uDQogICAgICBza3VJbmZvLnNrdUltYWdlTGlzdCA9IGltYWdlTGlzdC5tYXAoKGl0ZW0pID0+IHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBpbWdOYW1lOiBpdGVtLmltZ05hbWUsDQogICAgICAgICAgaW1nVXJsOiBpdGVtLmltZ1VybCwNCiAgICAgICAgICBpc0RlZmF1bHQ6IGl0ZW0uaXNEZWZhdWx0LA0KICAgICAgICAgIHNwdUltZ0lkOiBpdGVtLmlkLA0KICAgICAgICB9Ow0KICAgICAgfSk7DQogICAgICAvL+WPkeivt+axgg0KICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJEFQSS5zcHUucmVxQWRkU2t1KHNrdUluZm8pOw0KICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiB9KTsNCiAgICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlU2NlbmVzIiwgMCk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/Spu/SkuForm","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"form\" label-width=\"80px\">\r\n      <el-form-item label=\"SPU名称\">{{ spu.spuName }}</el-form-item>\r\n      <el-form-item label=\"SKU名称\">\r\n        <el-input placeholder=\"sku名称\" v-model=\"skuInfo.skuName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"价格（元）\">\r\n        <el-input\r\n          placeholder=\"价格（元）\"\r\n          type=\"number\"\r\n          v-model=\"skuInfo.price\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"重量（千克）\">\r\n        <el-input\r\n          placeholder=\"重量（千克）\"\r\n          v-model=\"skuInfo.weight\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"规格描述\">\r\n        <el-input type=\"textarea\" rows=\"4\" v-model=\"skuInfo.skuDesc\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"平台属性\">\r\n        <el-form :inline=\"true\" ref=\"form\" label-width=\"80px\">\r\n          <el-form-item\r\n            :label=\"attr.attrName\"\r\n            v-for=\"(attr, index) in attrInfoList\"\r\n            :key=\"attr.id\"\r\n          >\r\n            <el-select placeholder=\"请选择\" v-model=\"attr.attrIdAndValueId\">\r\n              <el-option\r\n                :label=\"attrValue.valueName\"\r\n                :value=\"`${attr.id}:${attrValue.id}`\"\r\n                v-for=\"(attrValue, index) in attr.attrValueList\"\r\n                :key=\"attrValue.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-form-item>\r\n      <el-form-item label=\"销售属性\">\r\n        <el-form :inline=\"true\" ref=\"form\" label-width=\"80px\">\r\n          <el-form-item\r\n            :label=\"saleAttr.saleAttrName\"\r\n            v-for=\"(saleAttr, index) in spuSaleAttrList\"\r\n            :key=\"saleAttr.id\"\r\n          >\r\n            <el-select placeholder=\"请选择\" v-model=\"saleAttr.attrIdAndValueId\">\r\n              <el-option\r\n                :label=\"saleAttrValue.saleAttrValueName\"\r\n                :value=\"`${saleAttr.id}:${saleAttrValue.id}`\"\r\n                v-for=\"(saleAttrValue, index) in saleAttr.spuSaleAttrValueList\"\r\n                :key=\"saleAttrValue.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"图片列表\">\r\n        <el-table\r\n          style=\"width: 100%\"\r\n          border\r\n          :data=\"spuImageList\"\r\n          @selection-change=\"handleSelectChange\"\r\n        >\r\n          <el-table-column\r\n            prop=\"prop\"\r\n            type=\"selection\"\r\n            width=\"width\"\r\n          ></el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"图片\" width=\"width\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <img :src=\"row.imgUrl\" alt=\"\" style=\"width=100px;height:100px\" />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"prop\"\r\n            label=\"名称\"\r\n            width=\"width\"\r\n          ></el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"width\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"promiry\"\r\n                v-if=\"row.isDefault == 0\"\r\n                @click=\"changeDefault(row)\"\r\n                >设置默认</el-button\r\n              >\r\n              <el-button v-else>默认</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //存储图片的信息\r\n      spuImageList: [],\r\n      //存储销售的属性\r\n      spuSaleAttrList: [],\r\n      //存储平台属性的数据\r\n      attrInfoList: [],\r\n      //收集sku数据的字段\r\n      skuInfo: {\r\n        //第一类收集的数据，父组件给的数据\r\n        category3Id: 0,\r\n        spuId: 0,\r\n        tmId: 0,\r\n        //第二类：需要通过数据双向绑定v-model收集\r\n        skuName: \"\",\r\n        price: 0,\r\n        weight: \"\",\r\n        skuDesc: \"\",\r\n        //第三类：需要自己书写代码\r\n        //默认图片\r\n        skuDefaultImg: \"\",\r\n        //平台属性\r\n        skuAttrValueList: [\r\n          {\r\n            attrId: 0,\r\n            valueId: 0,\r\n          },\r\n        ],\r\n        //收集图片的字段\r\n        skuImageList: [\r\n          // {\r\n          //   id: 0,\r\n          //   imgName: \"string\",\r\n          //   imgUrl: \"string\",\r\n          //   isDefault: \"string\",\r\n          //   skuId: 0,\r\n          //   spuImgId: 0,\r\n          // },\r\n        ],\r\n        //销售属性\r\n        skuSaleAttrValueList: [\r\n          // {\r\n          //   id: 0,\r\n          //   saleAttrId: 0,\r\n          //   saleAttrName: \"string\",\r\n          //   saleAttrValueId: 0,\r\n          //   saleAttrValueName: \"string\",\r\n          //   skuId: 0,\r\n          //   spuId: 0,\r\n          // },\r\n        ],\r\n      },\r\n      spu: {},\r\n      //收集图片的数据字段\r\n      imageList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    //获取skuForm数据\r\n    async getData(category1Id, category2Id, spu) {\r\n      //收集父组件给予的数据\r\n      this.skuInfo.category3Id = spu.category3Id;\r\n      this.skuInfo.spuId = spu.id;\r\n      this.skuInfo.tmId = spu.tmId;\r\n      this.spu = spu;\r\n      let res = await this.$API.spu.reqSpuImageList(spu.id);\r\n      if (res.code == 200) {\r\n        let list = res.data;\r\n        list.forEach((item) => {\r\n          item.isDefault = 0;\r\n        });\r\n        this.spuImageList = list;\r\n      }\r\n      let res1 = await this.$API.spu.reqSpuSaleAttrList(spu.id);\r\n      if (res1.code == 200) {\r\n        this.spuSaleAttrList = res1.data;\r\n      }\r\n      let res2 = await this.$API.spu.reqSpuInfoList(\r\n        category1Id,\r\n        category2Id,\r\n        spu.category3Id\r\n      );\r\n      if (res2.code == 200) {\r\n        this.attrInfoList = res2.data;\r\n      }\r\n    },\r\n    //table表格复选框选中的事件\r\n    handleSelectChange(params) {\r\n      //获取用户选中图片的信息，但是缺少isDefault字段\r\n      this.imageList = params;\r\n    },\r\n    //排他的操作\r\n    changeDefault(row) {\r\n      //图片列表的数据的isDefault字段为0\r\n      this.spuImageList.forEach((item) => {\r\n        item.isDefault = 0;\r\n      });\r\n      row.isDefault = 1;\r\n      this.skuInfo.skuDefaultImg = row.imgUrl;\r\n    },\r\n    //取消\r\n    cancel() {\r\n      //自定义事件，让父组件切换场景为0\r\n      this.$emit(\"changeScenes\", 0);\r\n      //清除数据\r\n      Object.assign(this._data, this.$options.data());\r\n    },\r\n    //保存\r\n    async save() {\r\n      //整理平台属性\r\n      const { attrInfoList, skuInfo, spuSaleAttrList, imageList } = this;\r\n      //整理平台属性数据方法1\r\n      // let arr=[];\r\n      // //把收集到的数据先整理一下\r\n      // attrInfoList.forEach(item=>{\r\n      //   //当前平台属性用户进行选择\r\n      //   if(item.attrIdAndValueId){\r\n      //     const [attrId,valueId]=item.attrIdAndValueId.split(\":\");\r\n      //     //携带给服务器参数应该是对象\r\n      //     let obj={valueId,attrId};\r\n      //     arr.push(obj)\r\n      //   }\r\n      // })\r\n      //整理平台属性数据方法2\r\n      skuInfo.skuAttrValueList = attrInfoList.reduce((prev, item) => {\r\n        if (item.attrIdAndValueId) {\r\n          const [attrId, valueId] = item.attrIdAndValueId.split(\":\");\r\n          prev.push({ attrId, valueId });\r\n        }\r\n        return prev;\r\n      }, []);\r\n      //整理销售属性\r\n      skuInfo.skuSaleAttrValueList = spuSaleAttrList.reduce((prev, item) => {\r\n        if (item.attrIdAndValueId) {\r\n          const [saleAttrId, saleAttrValueId] = item.attrIdAndValueId;\r\n          prev.push({ saleAttrId, saleAttrValueId });\r\n        }\r\n        return prev;\r\n      }, []);\r\n      //整理图片的数据\r\n      skuInfo.skuImageList = imageList.map((item) => {\r\n        return {\r\n          imgName: item.imgName,\r\n          imgUrl: item.imgUrl,\r\n          isDefault: item.isDefault,\r\n          spuImgId: item.id,\r\n        };\r\n      });\r\n      //发请求\r\n      let res = await this.$API.spu.reqAddSku(skuInfo);\r\n      if (res.code == 200) {\r\n        this.$message({ type: \"success\", message: \"添加成功\" });\r\n        this.$emit(\"changeScenes\", 0);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}