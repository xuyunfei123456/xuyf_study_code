{"remainingRequest":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Spu\\SpuForm\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\views\\product\\Spu\\SpuForm\\index.vue","mtime":1645102564616},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1643016934935},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js","mtime":1643016935387},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\babel.config.js","mtime":1643007385471},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1643016934935},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\vue-loader\\lib\\index.js","mtime":1643016935387}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6XFxVc2Vyc1xcOTg3NTFcXERlc2t0b3BcXGNvZGVcXFx1NTQwRVx1NTNGMFx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcVXNlcnNcXDk4NzUxXFxEZXNrdG9wXFxjb2RlXFxcdTU0MEVcdTUzRjBcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREZcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAiIiwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vc3B15bGe5oCn5Yid5aeL5YyW55qE5pe25YCZ5piv5LiA5Liq56m65a+56LGh77yM5Zyo5L+u5pS5c3B155qE5pe25YCZ77yM5Lya5ZCR5pyN5Yqh5Zmo5Y+R6K+35rGC77yM6L+U5Zuec3B15L+h5oGv77yM5Zyo5L+u5pS555qE5pe25YCZ5Y+v5Lul5Yip55So5pyN5Yqh5Zmo6L+U5Zue55qE6L+Z5Liq5a+56LGh5pS26ZuG5pyA5paw55qE5pWw5o2u5o+Q5Lqk57uZ5pyN5Yqh5ZmoCiAgICAgIC8v5re75Yqgc3B15rKh5aaC5p6c5piv5re75Yqgc3B155qE5pe25YCZ5bm25rKh5pyJ5ZCR5pyN5Yqh5Zmo5Y+R6K+35rGCCiAgICAgIHNwdTogewogICAgICAgIGNhdGVnb3J5M0lkOiAwLAogICAgICAgIC8v5LiJ57qn5YiG57G755qESUQKICAgICAgICB0bUlkOiAwLAogICAgICAgIC8v5bmz5Y+waWQKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgLy/mj4/ov7AKICAgICAgICBzcHVJbWFnZUxpc3Q6IFsvL+aUtumbhnNwdeWbvueJh+eahOS/oeaBrwogICAgICAgIHsKICAgICAgICAgIGlkOiAwLAogICAgICAgICAgaW1nTmFtZTogIiIsCiAgICAgICAgICBpbWdVcmw6ICIiLAogICAgICAgICAgc3B1SWQ6IDAKICAgICAgICB9XSwKICAgICAgICBzcHVOYW1lOiAiIiwKICAgICAgICAvL3NwdeWQjeensAogICAgICAgIHNwdVNhbGVBdHRyTGlzdDogWy8v5bmz5Y+w5bGe5oCn5LiO5bGe5oCn5YC855qE5pS26ZuGCiAgICAgICAgewogICAgICAgICAgYmFzZVNhbGVBdHRySWQ6IDAsCiAgICAgICAgICBpZDogMCwKICAgICAgICAgIHNhbGVBdHRyTmFtZTogIiIsCiAgICAgICAgICBzcHVJZDogMCwKICAgICAgICAgIHNwdVNhbGVBdHRyVmFsdWVMaXN0OiBbewogICAgICAgICAgICBiYXNlU2FsZUF0dHJJZDogMCwKICAgICAgICAgICAgaWQ6IDAsCiAgICAgICAgICAgIGlzQ2hlY2tlZDogIiIsCiAgICAgICAgICAgIHNhbGVBdHRyTmFtZTogIiIsCiAgICAgICAgICAgIHNhbGVBdHRyVmFsdWVOYW1lOiAiIiwKICAgICAgICAgICAgc3B1SWQ6IDAKICAgICAgICAgIH1dCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgLy/lrZjlgqhzcHXkv6Hmga/lsZ7mgKcKICAgICAgdHJhZGVNYXJrTGlzdDogW10sCiAgICAgIC8v5a2Y5YKo5ZOB54mM5L+h5oGvCiAgICAgIHNwdUltZ0xpc3Q6IFtdLAogICAgICAvL+WtmOWCqHNwdeWbvueJh+eahOaVsOaNrgogICAgICBzYWxlQXR0ckxpc3Q6IFtdLAogICAgICAvL+mUgOWUruWxnuaAp+eahOaVsOaNrgogICAgICBhdHRySWQ6ICIiIC8v5pS26ZuG5pyq6YCJ5oup55qE6ZSA5ZSu5bGe5oCn55qESUQKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8v6K6h566X5Ye66L+Y5pyq6YCJ5oup55qE6ZSA5ZSu5bGe5oCnCiAgICB1blNlbGVjdFNhbGVBdHRyOiBmdW5jdGlvbiB1blNlbGVjdFNhbGVBdHRyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuc2FsZUF0dHJMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfdGhpcy5zcHUuc3B1U2FsZUF0dHJMaXN0LmV2ZXJ5KGZ1bmN0aW9uIChpdGVtMSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSAhPSBpdGVtMS5zYWxlQXR0ck5hbWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5zcHVJbWdMaXN0ID0gZmlsZUxpc3Q7CiAgICB9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy/nhafniYflopnlm77niYfkuIrkvKDmiJDlip/nmoTlm57osIMKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuc3B1SW1nTGlzdCA9IGZpbGVMaXN0OwogICAgfSwKICAgIC8v5Yid5aeL5YyWc3B1Rm9ybeaVsOaNrgogICAgaW5pdFNwdURhdGE6IGZ1bmN0aW9uIGluaXRTcHVEYXRhKHNwdSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNwdVJlc3VsdCwgdHJhZGVNYXJrUmVzdWx0LCBzcHVJbWdSZXN1bHQsIGxzaXRBdHRyLCBzYWxlUmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kQVBJLnNwdS5yZXFTcHUoc3B1LmlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgc3B1UmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoc3B1UmVzdWx0LmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5zcHUgPSBzcHVSZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgIH0gLy/ojrflj5blk4HniYzkv6Hmga8KCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRBUEkuc3B1LnJlcVRyYWRlTWFya0xpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdHJhZGVNYXJrUmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAodHJhZGVNYXJrUmVzdWx0LmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi50cmFkZU1hcmtMaXN0ID0gdHJhZGVNYXJrUmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgICB9IC8v6I635Y+Wc3B15Zu+54mH55qE5pWw5o2uCgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJEFQSS5zcHUucmVxU3B1SW1hZ2VMaXN0KHNwdS5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBzcHVJbWdSZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzcHVJbWdSZXN1bHQuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgbHNpdEF0dHIgPSBzcHVJbWdSZXN1bHQuZGF0YTsgLy/nlLHkuo7nhafniYflopnmmL7npLrlm77niYfnmoTmlbDmja7pnIDopoHmlbDnu4TvvIzmlbDnu4Tph4zpnaLnmoTlhYPntKDpnIDopoHmnIluYW1l5ZKMdXJs5a2X5q61CiAgICAgICAgICAgICAgICAgIC8v6ZyA6KaB5oqK5pyN5Yqh5Zmo6L+U5Zue55qE5pWw5o2u6L+b6KGM5L+u5pS5CgogICAgICAgICAgICAgICAgICBsc2l0QXR0ci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5pbWdOYW1lOwogICAgICAgICAgICAgICAgICAgIGl0ZW0udXJsID0gaXRlbS5pbWdVcmw7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBfdGhpczIuc3B1SW1nTGlzdCA9IGxzaXRBdHRyOwogICAgICAgICAgICAgICAgfSAvL+iOt+WPluW5s+WPsOWFqOmDqOeahOmUgOWUruWxnuaApwoKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRBUEkuc3B1LnJlcUJhc2VTYWxlQXR0ckxpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHNhbGVSZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzYWxlUmVzdWx0LmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5zYWxlQXR0ckxpc3QgPSBzYWxlUmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/mt7vliqDmlrDnmoTplIDllK7lsZ7mgKcKICAgIGF0dFNhbGVBdHRyOiBmdW5jdGlvbiBhdHRTYWxlQXR0cigpIHsKICAgICAgLy/lt7Lnu4/mlLbpm4bpnIDopoHmt7vliqDnmoTplIDllK7lsZ7mgKfnmoTkv6Hmga8gICDmiormlLbpm4bliLDnmoTplIDllK7lsZ7mgKfmlbDmja7ov5vooYzliIblibIKICAgICAgdmFyIF90aGlzJGF0dHJJZCRzcGxpdCA9IHRoaXMuYXR0cklkLnNwbGl0KCI6IiksCiAgICAgICAgICBfdGhpcyRhdHRySWQkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3RoaXMkYXR0cklkJHNwbGl0LCAyKSwKICAgICAgICAgIGJhc2VTYWxlQXR0cklkID0gX3RoaXMkYXR0cklkJHNwbGl0MlswXSwKICAgICAgICAgIHNhbGVBdHRyTmFtZSA9IF90aGlzJGF0dHJJZCRzcGxpdDJbMV07IC8v5ZCRc3B15a+56LGh55qEc3B1U2FsZUF0dHJMaXN05bGe5oCn6YeM6Z2i5re75Yqg5paw55qE6ZSA5ZSu5bGe5oCnCgoKICAgICAgdmFyIG5ld1NhbGVBdHRyID0gewogICAgICAgIGJhc2VTYWxlQXR0cklkOiBiYXNlU2FsZUF0dHJJZCwKICAgICAgICBzYWxlQXR0ck5hbWU6IHNhbGVBdHRyTmFtZSwKICAgICAgICBzcHVTYWxlQXR0clZhbHVlTGlzdDogW10KICAgICAgfTsKICAgICAgdGhpcy5zcHUuc3B1U2FsZUF0dHJMaXN0LnB1c2gobmV3U2FsZUF0dHIpOwogICAgICB0aGlzLmF0dHJJZCA9ICIiOwogICAgfSwKICAgIC8v5re75Yqg5oyJ6ZKu55qE5Zue6LCDCiAgICBhZGRTYWxlQXR0clZhbHVlOiBmdW5jdGlvbiBhZGRTYWxlQXR0clZhbHVlKHJvdykgewogICAgICB0aGlzLiRzZXQocm93LCAiaW5wdXRWaXNpYmxlIiwgdHJ1ZSk7CiAgICAgIHRoaXMuJHNldChyb3csICJpbnB1dFZhbHVlIiwgIiIpOwogICAgfSwKICAgIC8v5aSx5Y6754Sm54K55LqL5Lu2CiAgICBoYW5kbGVJbnB1dENvbmZpcm06IGZ1bmN0aW9uIGhhbmRsZUlucHV0Q29uZmlybShyb3cpIHsKICAgICAgdmFyIGJhc2VTYWxlQXR0cklkID0gcm93LmJhc2VTYWxlQXR0cklkLAogICAgICAgICAgaW5wdXRWYWx1ZSA9IHJvdy5pbnB1dFZhbHVlOwoKICAgICAgaWYgKGlucHV0VmFsdWUudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgi5bGe5oCn5YC85LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8v5bGe5oCn5YC85LiN6IO96YeN5aSNCgoKICAgICAgdmFyIHJlcyA9IHJvdy5zcHVTYWxlQXR0clZhbHVlTGlzdC5ldmVyeShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnNhbGVBdHRyVmFsdWVOYW1lICE9IGlucHV0VmFsdWU7CiAgICAgIH0pOwoKICAgICAgaWYgKCFyZXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy/mlrDlop7nmoTplIDllK7lsZ7mgKflgLwKCgogICAgICB2YXIgbmV3U2FsZUF0dHJWYWx1ZSA9IHsKICAgICAgICBiYXNlU2FsZUF0dHJJZDogYmFzZVNhbGVBdHRySWQsCiAgICAgICAgc2FsZUF0dHJWYWx1ZU5hbWU6IGlucHV0VmFsdWUKICAgICAgfTsKICAgICAgcm93LnNwdVNhbGVBdHRyVmFsdWVMaXN0LnB1c2gobmV3U2FsZUF0dHJWYWx1ZSk7CiAgICAgIHJvdy5pbnB1dFZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvL+S/neWtmOaMiemSrueahOWbnuiwgwogICAgYWRkT3JVcGRhdGVBcHU6IGZ1bmN0aW9uIGFkZE9yVXBkYXRlQXB1KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8v5pW055CG5Y+C5pWwOumcgOimgeaVtOeQhueFp+eJh+WimeeahOaVsOaNrgogICAgICAgICAgICAgICAgLy/mkLrluKblj4LmlbDvvJrlr7nkuo7lm77niYfvvIzpnIDopoHmkLrluKZpbWdOYW1l5LiOaW1nVXJs5a2X5q61CiAgICAgICAgICAgICAgICBfdGhpczMuc3B1LnNwdUltYWdlTGlzdCA9IF90aGlzMy5zcHVJbWdMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGltZ05hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgICAgICBpbWdVcmw6IGl0ZW0ucmVzcG9uc2UgJiYgaXRlbS5yZXNwb25zZS5kYXRhIHx8IGl0ZW0udXJsCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsgLy/lj5Hor7fmsYIKCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRBUEkuc3B1LnJlcUFkZE9yVXBkYXRlU3B1KF90aGlzMy5zcHUpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIC8v5o+Q56S6CiAgICAgICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjmiJDlip8iCiAgICAgICAgICAgICAgICAgIH0pOyAvL+mAmuefpeeItue7hOS7tuWbnuWIsOWcuuaZrzAKCgogICAgICAgICAgICAgICAgICBfdGhpczMuJGVtaXQoImNoYW5nZVNjZW5lIiwgewogICAgICAgICAgICAgICAgICAgIHNjZW5lOiAwLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IF90aGlzMy5zcHUuaWQgPyAi5L+u5pS5IiA6ICLmt7vliqAiCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oX3RoaXMzLl9kYXRhLCBfdGhpczMuJG9wdGlvbnMuZGF0YSgpKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/ngrnlh7vmt7vliqBzcHXmjInpkq7nmoTml7blgJnvvIzlj5Hor7fmsYLnmoTlh73mlbAKICAgIGFkZFNwdURhdGE6IGZ1bmN0aW9uIGFkZFNwdURhdGEoY2F0ZWdvcnkzSWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdHJhZGVNYXJrUmVzdWx0LCBzYWxlUmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL+a3u+WKoHNwdeeahOaXtuWAmeaUtumbhuS4iee6p+WIhuexu+eahGlkCiAgICAgICAgICAgICAgICBfdGhpczQuc3B1LmNhdGVnb3J5M0lkID0gY2F0ZWdvcnkzSWQ7IC8v6I635Y+W5ZOB54mM5L+h5oGvCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kQVBJLnNwdS5yZXFUcmFkZU1hcmtMaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRyYWRlTWFya1Jlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh0cmFkZU1hcmtSZXN1bHQuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LnRyYWRlTWFya0xpc3QgPSB0cmFkZU1hcmtSZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgIH0gLy/ojrflj5blubPlj7Dlhajpg6jnmoTplIDllK7lsZ7mgKcKCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kQVBJLnNwdS5yZXFCYXNlU2FsZUF0dHJMaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHNhbGVSZXN1bHQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoc2FsZVJlc3VsdC5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczQuc2FsZUF0dHJMaXN0ID0gc2FsZVJlc3VsdC5kYXRhOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL+WPlua2iOaMiemSrgogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIC8v5Y+W5raI5oyJ6ZKu55qE5Zue6LCD77yM6YCa55+l54i25Lqy5YiH5o2i5Zy65pmv5Li6MAogICAgICB0aGlzLiRlbWl0KCJjaGFuZ2VTY2VuZSIsIHsKICAgICAgICBzY2VuZTogMCwKICAgICAgICBmbGFnOiAiIgogICAgICB9KTsgLy/muIXnkIbmlbDmja4KICAgICAgLy/nu4Tku7blrp7kvot0aGlzLl9kYXRh77yM5Y+v5Lul5pON5L2cZGF0YeW9k+S4reWTjeW6lOW8j+aVsOaNrgogICAgICAvLyB0aGlzLiRvcHRpb25z5Y+v5Lul6I635Y+W6YWN572u5a+56LGh77yM6YWN572u5a+56LGh55qEZGF0YeWHveaVsOaJp+ihjO+8jOi/lOWbnueahOWTjeW6lOW8j+aVsOaNruS4uuepuueahAoKICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9kYXRhLCB0aGlzLiRvcHRpb25zLmRhdGEoKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"form\" label-width=\"80px\" :model=\"spu\">\r\n      <el-form-item label=\"SPU名称\">\r\n        <el-input placeholder=\"SPU名称\" v-model=\"spu.spuName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌\">\r\n        <el-select placeholder=\"请选择品牌\" v-model=\"spu.tmId\">\r\n          <el-option\r\n            :label=\"tm.name\"\r\n            :value=\"tm.id\"\r\n            v-for=\"(tm, index) in tradeMarkList\"\r\n            :key=\"tm.id\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"SPU描述\">\r\n        <el-input\r\n          placeholder=\"描述\"\r\n          type=\"textarea\"\r\n          rows=\"4\"\r\n          v-model=\"spu.description\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"SPU图片\">\r\n        <!-- 上传图片 action图片上传的地址   list-type文件列表的类型 on-preview图片预览的时候会触发 on-remove当删除图片的时候会触发 file-list照片墙展示的数据，数据里的元素必须有name和url属性-->\r\n        <el-upload\r\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n          list-type=\"picture-card\"\r\n          :on-preview=\"handlePictureCardPreview\"\r\n          :on-remove=\"handleRemove\"\r\n          :on-success=\"handleSuccess\"\r\n          :file-list=\"spuImgList\"\r\n        >\r\n          <i class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n        <el-dialog :visible.sync=\"dialogVisible\">\r\n          <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n        </el-dialog>\r\n      </el-form-item>\r\n      <el-form-item label=\"销售属性\">\r\n        <el-select\r\n          :placeholder=\"`还有${unSelectSaleAttr.length}未选择`\"\r\n          v-model=\"attrId\"\r\n        >\r\n          <el-option\r\n            :label=\"unSelect.name\"\r\n            :value=\"`${unSelect.id}:${unSelect.name}`\"\r\n            v-for=\"(unSelect, index) in unSelectSaleAttr\"\r\n            :key=\"unSelect.id\"\r\n          ></el-option>\r\n        </el-select>\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          :disabled=\"!attrId\"\r\n          @click=\"attSaleAttr\"\r\n          >添加销售属性</el-button\r\n        >\r\n        <!-- 展示的是当前spu属性自己的销售属性 -->\r\n        <el-table style=\"width: 100%\" border :data=\"spu.spuSaleAttrList\">\r\n          <el-table-column\r\n            align=\"center\"\r\n            type=\"index\"\r\n            label=\"序号\"\r\n            width=\"80\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            prop=\"saleAttrName\"\r\n            label=\"属性名\"\r\n            width=\"width\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            prop=\"prop\"\r\n            label=\"属性值名称列表\"\r\n            width=\"width\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-tag\r\n                :key=\"tag.id\"\r\n                v-for=\"(tag, index) in row.spuSaleAttrValueList\"\r\n                closable\r\n                :disable-transitions=\"false\"\r\n                @close=\"row.spuSaleAttrValueList.splice(index, 1)\"\r\n              >\r\n                {{ tag.saleAttrValueName }}\r\n              </el-tag>\r\n              <el-input\r\n                class=\"input-new-tag\"\r\n                v-if=\"row.inputVisible\"\r\n                v-model=\"row.inputValue\"\r\n                ref=\"saveTagInput\"\r\n                size=\"small\"\r\n                @keyup.enter.native=\"handleInputConfirm\"\r\n                @blur=\"handleInputConfirm(row)\"\r\n              >\r\n              </el-input>\r\n              <el-button\r\n                v-else\r\n                class=\"button-new-tag\"\r\n                size=\"small\"\r\n                @click=\"addSaleAttrValue(row)\"\r\n                >添加</el-button\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            prop=\"prop\"\r\n            label=\"操作\"\r\n            width=\"width\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n                @click=\"spu.spuSaleAttrList.splice($index, 1)\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"addOrUpdateApu\">保存</el-button>\r\n        <el-button type=\"primary\" @click=\"cancel\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      //spu属性初始化的时候是一个空对象，在修改spu的时候，会向服务器发请求，返回spu信息，在修改的时候可以利用服务器返回的这个对象收集最新的数据提交给服务器\r\n      //添加spu没如果是添加spu的时候并没有向服务器发请求\r\n      spu: {\r\n        category3Id: 0, //三级分类的ID\r\n        tmId: 0, //平台id\r\n        description: \"\", //描述\r\n        spuImageList: [\r\n          //收集spu图片的信息\r\n          {\r\n            id: 0,\r\n            imgName: \"\",\r\n            imgUrl: \"\",\r\n            spuId: 0,\r\n          },\r\n        ],\r\n        spuName: \"\", //spu名称\r\n        spuSaleAttrList: [\r\n          //平台属性与属性值的收集\r\n          {\r\n            baseSaleAttrId: 0,\r\n            id: 0,\r\n            saleAttrName: \"\",\r\n            spuId: 0,\r\n            spuSaleAttrValueList: [\r\n              {\r\n                baseSaleAttrId: 0,\r\n                id: 0,\r\n                isChecked: \"\",\r\n                saleAttrName: \"\",\r\n                saleAttrValueName: \"\",\r\n                spuId: 0,\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      }, //存储spu信息属性\r\n      tradeMarkList: [], //存储品牌信息\r\n      spuImgList: [], //存储spu图片的数据\r\n      saleAttrList: [], //销售属性的数据\r\n      attrId: \"\", //收集未选择的销售属性的ID\r\n    };\r\n  },\r\n  computed: {\r\n    //计算出还未选择的销售属性\r\n    unSelectSaleAttr() {\r\n      return this.saleAttrList.filter((item) => {\r\n        return this.spu.spuSaleAttrList.every((item1) => {\r\n          return item.name != item1.saleAttrName;\r\n        });\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    handleRemove(file, fileList) {\r\n      this.spuImgList = fileList;\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    //照片墙图片上传成功的回调\r\n    handleSuccess(response, file, fileList) {\r\n      this.spuImgList = fileList;\r\n    },\r\n    //初始化spuForm数据\r\n    async initSpuData(spu) {\r\n      let spuResult = await this.$API.spu.reqSpu(spu.id);\r\n      if (spuResult.code == 200) {\r\n        this.spu = spuResult.data;\r\n      }\r\n      //获取品牌信息\r\n      let tradeMarkResult = await this.$API.spu.reqTradeMarkList();\r\n      if (tradeMarkResult.code == 200) {\r\n        this.tradeMarkList = tradeMarkResult.data;\r\n      }\r\n      //获取spu图片的数据\r\n      let spuImgResult = await this.$API.spu.reqSpuImageList(spu.id);\r\n      if (spuImgResult.code == 200) {\r\n        let lsitAttr = spuImgResult.data;\r\n        //由于照片墙显示图片的数据需要数组，数组里面的元素需要有name和url字段\r\n        //需要把服务器返回的数据进行修改\r\n        lsitAttr.forEach((item) => {\r\n          item.name = item.imgName;\r\n          item.url = item.imgUrl;\r\n        });\r\n        this.spuImgList = lsitAttr;\r\n      }\r\n      //获取平台全部的销售属性\r\n      let saleResult = await this.$API.spu.reqBaseSaleAttrList();\r\n      if (saleResult.code == 200) {\r\n        this.saleAttrList = saleResult.data;\r\n      }\r\n    },\r\n    //添加新的销售属性\r\n    attSaleAttr() {\r\n      //已经收集需要添加的销售属性的信息   把收集到的销售属性数据进行分割\r\n      const [baseSaleAttrId, saleAttrName] = this.attrId.split(\":\");\r\n      //向spu对象的spuSaleAttrList属性里面添加新的销售属性\r\n      let newSaleAttr = {\r\n        baseSaleAttrId,\r\n        saleAttrName,\r\n        spuSaleAttrValueList: [],\r\n      };\r\n      this.spu.spuSaleAttrList.push(newSaleAttr);\r\n      this.attrId = \"\";\r\n    },\r\n    //添加按钮的回调\r\n    addSaleAttrValue(row) {\r\n      this.$set(row, \"inputVisible\", true);\r\n      this.$set(row, \"inputValue\", \"\");\r\n    },\r\n    //失去焦点事件\r\n    handleInputConfirm(row) {\r\n      const { baseSaleAttrId, inputValue } = row;\r\n      if (inputValue.trim() == \"\") {\r\n        this.$message(\"属性值不能为空\");\r\n        return;\r\n      }\r\n      //属性值不能重复\r\n      let res = row.spuSaleAttrValueList.every(\r\n        (item) => item.saleAttrValueName != inputValue\r\n      );\r\n      if (!res) {\r\n        return;\r\n      }\r\n      //新增的销售属性值\r\n      let newSaleAttrValue = { baseSaleAttrId, saleAttrValueName: inputValue };\r\n      row.spuSaleAttrValueList.push(newSaleAttrValue);\r\n      row.inputVisible = false;\r\n    },\r\n    //保存按钮的回调\r\n    async addOrUpdateApu() {\r\n      //整理参数:需要整理照片墙的数据\r\n      //携带参数：对于图片，需要携带imgName与imgUrl字段\r\n      this.spu.spuImageList = this.spuImgList.map((item) => {\r\n        return {\r\n          imgName: item.name,\r\n          imgUrl: (item.response && item.response.data) || item.url,\r\n        };\r\n      });\r\n      //发请求\r\n      let res = await this.$API.spu.reqAddOrUpdateSpu(this.spu);\r\n      if (res.code == 200) {\r\n        //提示\r\n        this.$message({ type: \"success\", message: \"保存成功\" });\r\n        //通知父组件回到场景0\r\n        this.$emit(\"changeScene\", {\r\n          scene: 0,\r\n          flag: this.spu.id ? \"修改\" : \"添加\",\r\n        });\r\n      }\r\n      Object.assign(this._data, this.$options.data());\r\n    },\r\n    //点击添加spu按钮的时候，发请求的函数\r\n    async addSpuData(category3Id) {\r\n      //添加spu的时候收集三级分类的id\r\n      this.spu.category3Id = category3Id;\r\n      //获取品牌信息\r\n      let tradeMarkResult = await this.$API.spu.reqTradeMarkList();\r\n      if (tradeMarkResult.code == 200) {\r\n        this.tradeMarkList = tradeMarkResult.data;\r\n      }\r\n      //获取平台全部的销售属性\r\n      let saleResult = await this.$API.spu.reqBaseSaleAttrList();\r\n      if (saleResult.code == 200) {\r\n        this.saleAttrList = saleResult.data;\r\n      }\r\n    },\r\n    //取消按钮\r\n    cancel() {\r\n      //取消按钮的回调，通知父亲切换场景为0\r\n      this.$emit(\"changeScene\", { scene: 0, flag: \"\" });\r\n      //清理数据\r\n      //组件实例this._data，可以操作data当中响应式数据\r\n      // this.$options可以获取配置对象，配置对象的data函数执行，返回的响应式数据为空的\r\n      Object.assign(this._data, this.$options.data());\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.button-new-tag {\r\n  margin-left: 10px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n</style>"],"sourceRoot":"src/views/product/Spu/SpuForm"}]}