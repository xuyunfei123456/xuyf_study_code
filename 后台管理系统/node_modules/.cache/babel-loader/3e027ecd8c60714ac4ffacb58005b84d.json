{"remainingRequest":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\src\\store\\modules\\user.js","mtime":1643009825325},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\babel.config.js","mtime":1643007385471},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643016933534},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\babel-loader\\lib\\index.js","mtime":1643016934935},{"path":"C:\\Users\\98751\\Desktop\\code\\后台管理系统\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1643016933805}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcOTg3NTFcXERlc2t0b3BcXGNvZGVcXFx1NTQwRVx1NTNGMFx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERlxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbih7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzLmNvZGUgPT09IDIwMDAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICBzZXRUb2tlbihyZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgJ29rJyk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZmFpbGUnKSkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmV0dXJuIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["C:/Users/98751/Desktop/code/后台管理系统/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","userInfo","commit","username","password","trim","res","code","data","Promise","reject","Error","resolve","then","response","catch","error","resetToken","namespaced"],"mappings":"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","sourcesContent":["import {\n  login,\n  logout,\n  getInfo\n} from '@/api/user'\nimport {\n  getToken,\n  setToken,\n  removeToken\n} from '@/utils/auth'\nimport {\n  resetRouter\n} from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  }\n}\n\nconst actions = {\n  // user login\n  async login({\n    commit\n  }, userInfo) {\n    const {\n      username,\n      password\n    } = userInfo\n    let res = await login({\n      username: username.trim(),\n      password: password\n    })\n    if (res.code === 20000) {\n      commit('SET_TOKEN', res.data.token)\n      setToken(res.data.token)\n      return 'ok'\n    } else {\n      return Promise.reject(new Error('faile'))\n    }\n    // return new Promise((resolve, reject) => {\n    //   login({ username: username.trim(), password: password }).then(response => {\n    //     const { data } = response\n    //     commit('SET_TOKEN', data.token)\n    //     setToken(data.token)\n    //     resolve()\n    //   }).catch(error => {\n    //     reject(error)\n    //   })\n    // })\n  },\n\n  // get user info\n  getInfo({\n    commit,\n    state\n  }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const {\n          data\n        } = response\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const {\n          name,\n          avatar\n        } = data\n\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({\n    commit,\n    state\n  }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({\n    commit\n  }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}